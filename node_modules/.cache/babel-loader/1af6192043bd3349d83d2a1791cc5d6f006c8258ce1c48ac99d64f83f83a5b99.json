{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nexport function useWebSocket(url, token, onMessage) {\n  _s();\n  const wsRef = useRef(null);\n  useEffect(() => {\n    // don’t even try to connect if no chat yet\n    if (!url || url.endsWith('/ws/null')) return;\n    const ws = new WebSocket(`${url}?token=${token}`);\n    ws.onmessage = e => onMessage(JSON.parse(e.data));\n    ws.onerror = console.error;\n    wsRef.current = ws;\n    return () => ws.close();\n  }, [url, token, onMessage]);\n  return wsRef.current;\n}\n_s(useWebSocket, \"QdfxMzvzcAhNcX9HkNqVUNbfVRs=\");","map":{"version":3,"names":["useEffect","useRef","useWebSocket","url","token","onMessage","_s","wsRef","endsWith","ws","WebSocket","onmessage","e","JSON","parse","data","onerror","console","error","current","close"],"sources":["C:/Users/Amor/Downloads/Telegram-front-scaffold/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\n\r\nexport function useWebSocket(url, token, onMessage) {\r\n  const wsRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // don’t even try to connect if no chat yet\r\n    if (!url || url.endsWith('/ws/null')) return;\r\n\r\n    const ws = new WebSocket(`${url}?token=${token}`);\r\n    ws.onmessage = e => onMessage(JSON.parse(e.data));\r\n    ws.onerror   = console.error;\r\n\r\n    wsRef.current = ws;\r\n    return () => ws.close();\r\n  }, [url, token, onMessage]);\r\n\r\n  return wsRef.current;\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEzC,OAAO,SAASC,YAAYA,CAACC,GAAG,EAAEC,KAAK,EAAEC,SAAS,EAAE;EAAAC,EAAA;EAClD,MAAMC,KAAK,GAAGN,MAAM,CAAC,IAAI,CAAC;EAE1BD,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACG,GAAG,IAAIA,GAAG,CAACK,QAAQ,CAAC,UAAU,CAAC,EAAE;IAEtC,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAC,GAAGP,GAAG,UAAUC,KAAK,EAAE,CAAC;IACjDK,EAAE,CAACE,SAAS,GAAGC,CAAC,IAAIP,SAAS,CAACQ,IAAI,CAACC,KAAK,CAACF,CAAC,CAACG,IAAI,CAAC,CAAC;IACjDN,EAAE,CAACO,OAAO,GAAKC,OAAO,CAACC,KAAK;IAE5BX,KAAK,CAACY,OAAO,GAAGV,EAAE;IAClB,OAAO,MAAMA,EAAE,CAACW,KAAK,CAAC,CAAC;EACzB,CAAC,EAAE,CAACjB,GAAG,EAAEC,KAAK,EAAEC,SAAS,CAAC,CAAC;EAE3B,OAAOE,KAAK,CAACY,OAAO;AACtB;AAACb,EAAA,CAhBeJ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}